; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[env:lolin32]
platform = espressif32
board = lolin32
framework = arduino
lib_deps = 
    https://github.com/toomasz/SimcomGsmLib
    https://github.com/toomasz/ArduinoFixedString
    esphome/Improv @ ^1.2.2
    ArduinoJson=https://github.com/bblanchon/ArduinoJson.git#6.x
monitor_speed=115200
board_build.partitions = no_ota.csv
build_flags =
  -Os
  !echo "-DGIT_VERSION='\""$(git describe --match="" --dirty --always)"\"'"
  ! [ "$GITHUB_REF_TYPE" = "tag" ] && echo "-DSMS2SLACK_VERSION='\""$GITHUB_REF_NAME"\"'" || echo "-DSMS2SLACK_VERSION='\""$(git describe --match="" --dirty --always)"\"'"
  -DPLATFORMIO_ENV='"$PIOENV"'
  -DSMS_RX='16'
  -DSMS_TX='17'
  -DSMS_DTR='14'
  -DCORE_DEBUG_LEVEL=ARDUHAL_LOG_LEVEL_INFO